(()=>{var e={};e.id=971,e.ids=[971],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4335:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var a=r(60687),s=r(30036),i=r(43210);let n=(0,s.default)(async()=>{},{loadableGenerated:{modules:["components/dashboard/TicketBrandBreakdown.tsx -> react-apexcharts"]},ssr:!1}),d=["#6366F1","#34D399","#FBBF24","#F87171","#A855F7","#0EA5E9","#FB7185"];function l({allTime:e,today:t}){let[r,s]=(0,i.useState)("all"),l="all"===r?e:t,o=(0,i.useMemo)(()=>{let e=l.map(e=>e.count),t={chart:{type:"donut",fontFamily:"Outfit, sans-serif"},labels:l.map(e=>e.brand),colors:d,legend:{show:!0,position:"bottom",fontFamily:"Outfit, sans-serif"},tooltip:{fillSeriesColor:!1,y:{formatter:(r,a)=>{let s=e.reduce((e,t)=>e+t,0),i=s?(r/s*100).toFixed(1):"0.0",n=t.labels?.[a.seriesIndex]??"Brand";return`${n}: ${r} tickets (${i}%)`}}},dataLabels:{enabled:!1},stroke:{width:0}};return{series:e,options:t}},[l]);return(0,a.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] sm:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white/90",children:"Brand Breakdown"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"all"===r?"All-time ticket distribution":"Tickets created today"})]}),(0,a.jsx)("div",{className:"flex rounded-full border border-gray-200 p-1 text-xs dark:border-gray-700",children:[{label:"All time",value:"all"},{label:"Today",value:"today"}].map(e=>(0,a.jsx)("button",{onClick:()=>s(e.value),className:`rounded-full px-3 py-1 font-medium transition ${r===e.value?"bg-gray-900 text-white dark:bg-white dark:text-gray-900":"text-gray-500"}`,children:e.label},e.value))})]}),l.length?(0,a.jsx)(n,{options:o.options,series:o.series,type:"donut",height:320}):(0,a.jsx)("div",{className:"py-14 text-center text-sm text-gray-500 dark:text-gray-400",children:"No brand data available for this range."})]})}},10814:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(37413);r(61120);var s=r(39916),i=r(12909),n=r(89843);async function d({children:e}){let t=await (0,i.HW)();return t||(0,s.redirect)("/signin"),(0,a.jsx)(n.default,{user:t,children:e})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14270:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(60687);r(43210);let s=({variant:e="light",color:t="primary",size:r="md",startIcon:s,endIcon:i,children:n})=>{let d={light:{primary:"bg-brand-50 text-brand-500 dark:bg-brand-500/15 dark:text-brand-400",success:"bg-success-50 text-success-600 dark:bg-success-500/15 dark:text-success-500",error:"bg-error-50 text-error-600 dark:bg-error-500/15 dark:text-error-500",warning:"bg-warning-50 text-warning-600 dark:bg-warning-500/15 dark:text-orange-400",info:"bg-blue-light-50 text-blue-light-500 dark:bg-blue-light-500/15 dark:text-blue-light-500",light:"bg-gray-100 text-gray-700 dark:bg-white/5 dark:text-white/80",dark:"bg-gray-500 text-white dark:bg-white/5 dark:text-white"},solid:{primary:"bg-brand-500 text-white dark:text-white",success:"bg-success-500 text-white dark:text-white",error:"bg-error-500 text-white dark:text-white",warning:"bg-warning-500 text-white dark:text-white",info:"bg-blue-light-500 text-white dark:text-white",light:"bg-gray-400 dark:bg-white/5 text-white dark:text-white/80",dark:"bg-gray-700 text-white dark:text-white"}}[e][t];return(0,a.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 justify-center gap-1 rounded-full font-medium ${{sm:"text-theme-xs",md:"text-sm"}[r]} ${d}`,children:[s&&(0,a.jsx)("span",{className:"mr-1",children:s}),n,i&&(0,a.jsx)("span",{className:"ml-1",children:i})]})}},15218:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/iwan/Downloads/New Chat/new-support/src/components/dashboard/TicketTimelineChart.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/iwan/Downloads/New Chat/new-support/src/components/dashboard/TicketTimelineChart.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25074:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/iwan/Downloads/New Chat/new-support/src/components/dashboard/TicketMetrics.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/iwan/Downloads/New Chat/new-support/src/components/dashboard/TicketMetrics.tsx","default")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31158:(e,t,r)=>{Promise.resolve().then(r.bind(r,4335)),Promise.resolve().then(r.bind(r,57136)),Promise.resolve().then(r.bind(r,47512))},33873:e=>{"use strict";e.exports=require("path")},47349:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/iwan/Downloads/New Chat/new-support/src/components/dashboard/TicketBrandBreakdown.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/iwan/Downloads/New Chat/new-support/src/components/dashboard/TicketBrandBreakdown.tsx","default")},47512:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(60687),s=r(30036),i=r(43210);let n=(0,s.default)(async()=>{},{loadableGenerated:{modules:["components/dashboard/TicketTimelineChart.tsx -> react-apexcharts"]},ssr:!1});function d({data:e}){let t=(0,i.useMemo)(()=>({series:[{name:"Tickets",data:e.map(e=>({x:e.date,y:e.count}))}],options:{chart:{type:"area",height:320,toolbar:{show:!1},fontFamily:"Outfit, sans-serif"},stroke:{curve:"smooth",width:4,colors:["#34d399"]},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:0,stops:[0,90,100],colorStops:[]}},dataLabels:{enabled:!1},xaxis:{type:"datetime",labels:{style:{colors:"#94a3b8"},datetimeFormatter:{year:"yyyy",month:"MMM dd",day:"MMM dd"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#94a3b8"}}},grid:{yaxis:{lines:{show:!0}}},tooltip:{x:{format:"MMM dd"},y:{formatter:e=>`${e} tickets`}}}}),[e]);return(0,a.jsxs)("div",{className:"flex h-full flex-col rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] sm:p-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white/90",children:"Ticket Activity"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Daily ticket volume (last ",e.length||0," days)"]})]}),e.length?(0,a.jsx)("div",{className:"mt-6 flex-1",children:(0,a.jsx)(n,{options:t.options,series:t.series,type:"area",height:360})}):(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:"Tickets haven't been updated yet. Activity will show here automatically."})]})}},55511:e=>{"use strict";e.exports=require("crypto")},57136:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var a=r(60687),s=r(43210),i=r(14270),n=r(51872);let d=new Intl.NumberFormat("en-US");function l({summary:e,goalPerDay:t}){let[r,l]=(0,s.useState)(t),o=Math.min(100,Math.round(e.today/r*100)),c=Math.max(r-e.today,0);return(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3 md:gap-6",children:[(0,a.jsx)("div",{className:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] md:p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All-time Tickets"}),(0,a.jsx)("h3",{className:"mt-2 text-3xl font-semibold text-gray-900 dark:text-white",children:d.format(e.total)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tracking since your dashboard went live."})]}),(0,a.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-brand-50 text-brand-500 dark:bg-brand-500/15",children:(0,a.jsx)(n.bx,{className:"size-6"})})]})}),(0,a.jsx)("div",{className:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] md:p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tickets Today"}),(0,a.jsx)("h3",{className:"mt-2 text-3xl font-semibold text-gray-900 dark:text-white",children:d.format(e.today)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Since 12:00 AM local time."})]}),(0,a.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-emerald-50 text-emerald-500 dark:bg-emerald-500/15",children:(0,a.jsx)(n.DQ,{className:"size-6"})})]})}),(0,a.jsx)("div",{className:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] md:p-6",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Daily Goal"}),(0,a.jsxs)("h3",{className:"mt-2 text-3xl font-semibold text-gray-900 dark:text-white",children:[r," tickets"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Keeps the queue healthy."})]}),(0,a.jsx)(i.A,{color:c>0?"warning":"success",size:"sm",children:c>0?`${c} remaining`:"Goal met"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("label",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Adjust goal"}),(0,a.jsx)("select",{value:r,onChange:e=>l(Number(e.target.value)),className:"rounded-full border border-gray-200 bg-white px-3 py-1 text-xs font-medium text-gray-700 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-200",children:[16,24,32,40,48,60].map(e=>(0,a.jsxs)("option",{value:e,children:[e," tickets/day"]},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[o,"%"]})]}),(0,a.jsx)("div",{className:"mt-2 h-2 w-full rounded-full bg-gray-100 dark:bg-white/10",children:(0,a.jsx)("div",{className:"h-full rounded-full bg-brand-500 transition-all dark:bg-brand-400",style:{width:`${o}%`}})})]})]})})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64860:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x,metadata:()=>c});var a=r(37413);r(61120);var s=r(25074),i=r(47349),n=r(15218);let d=new Intl.NumberFormat("en-US");function l({today:e,yesterday:t}){let r=e-t,s=0===r?"neutral":r>0?"up":"down",i=t?Math.abs((e-t)/t*100).toFixed(1):"100",n="neutral"===s?"No change from yesterday":"up"===s?`${i}% more than yesterday`:`${i}% fewer than yesterday`;return(0,a.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] md:p-6",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today vs Yesterday"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap items-baseline gap-3",children:[(0,a.jsx)("span",{className:"text-3xl font-semibold text-gray-900 dark:text-white",children:d.format(e)}),(0,a.jsx)("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"today"})]}),(0,a.jsxs)("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:["Yesterday: ",d.format(t)," tickets â€¢ ",n]})]})}var o=r(31183);let c={title:"Ticket Monitoring Dashboard",description:"Live ticket analytics for your ticket monitoring workspace."};async function x(){let e=await o.A.ticket.findMany({select:{brand:!0,status:!0,updatedAt:!0},orderBy:{updatedAt:"asc"}}),t={total:e.length,today:0},r=new Map,d=new Map,c=new Map,x=new Date().toISOString().slice(0,10),m=new Date(Date.now()-864e5).toISOString().slice(0,10),h=0;e.forEach(e=>{let a=e.brand?.trim()||"Unknown",s=e.updatedAt.toISOString().slice(0,10);s===x&&(t.today+=1),s===m&&(h+=1),r.set(a,(r.get(a)||0)+1),s===x&&d.set(a,(d.get(a)||0)+1),c.set(s,(c.get(s)||0)+1)});let p=e=>Array.from(e.entries()).sort((e,t)=>t[1]-e[1]).slice(0,6).map(([e,t])=>({brand:e,count:t})),u=p(r),g=p(d),b=Array.from(c.entries()).sort((e,t)=>e[0].localeCompare(t[0])).slice(-10).map(([e,t])=>({date:e,count:t}));return(0,a.jsxs)("div",{className:"space-y-6 md:space-y-8",children:[(0,a.jsx)(s.default,{summary:t,goalPerDay:32}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-12 lg:items-stretch",children:[(0,a.jsx)("div",{className:"lg:col-span-8 h-full",children:(0,a.jsx)(n.default,{data:b})}),(0,a.jsxs)("div",{className:"flex h-full flex-col gap-6 lg:col-span-4",children:[(0,a.jsx)(l,{today:t.today,yesterday:h}),(0,a.jsx)(i.default,{allTime:u,today:g})]})]})]})}},68110:(e,t,r)=>{Promise.resolve().then(r.bind(r,47349)),Promise.resolve().then(r.bind(r,25074)),Promise.resolve().then(r.bind(r,15218))},68449:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var a=r(65239),s=r(48088),i=r(88170),n=r.n(i),d=r(30893),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(t,l);let o={children:["",{children:["(admin)",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,64860)),"/Users/iwan/Downloads/New Chat/new-support/src/app/(admin)/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,10814)),"/Users/iwan/Downloads/New Chat/new-support/src/app/(admin)/layout.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/iwan/Downloads/New Chat/new-support/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"/Users/iwan/Downloads/New Chat/new-support/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/iwan/Downloads/New Chat/new-support/src/app/(admin)/page.tsx"],x={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(admin)/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},79551:e=>{"use strict";e.exports=require("url")},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,999,370,36,879,409],()=>r(68449));module.exports=a})();