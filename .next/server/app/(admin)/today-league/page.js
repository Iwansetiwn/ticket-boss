(()=>{var e={};e.id=7101,e.ids=[7101],e.modules={163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=r(71042).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10814:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(37413);r(61120);var a=r(39916),o=r(12909),i=r(89843);async function d({children:e}){let t=await (0,o.HW)();return t||(0,a.redirect)("/signin"),(0,n.jsx)(i.default,{user:t,children:e})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16189:(e,t,r)=>{"use strict";var n=r(65773);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30474:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var n=r(31261),a=r.n(n)},31261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return s},getImageProps:function(){return d}});let n=r(14985),a=r(44953),o=r(46533),i=n._(r(1933));function d(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let s=o.Image},33873:e=>{"use strict";e.exports=require("path")},39916:(e,t,r)=>{"use strict";var n=r(97576);r.o(n,"notFound")&&r.d(t,{notFound:function(){return n.notFound}}),r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}})},48976:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},53849:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>d});var n=r(37413);r(61120);var a=r(39916),o=r(31183),i=r(12909);let d={title:"Today Ticket League | Ticket Monitoring",description:"Live leaderboard showing ticket counts by teammate for today."};function s(e){return e.toLocaleString()}async function l(){let e=await (0,i.HW)();e||(0,a.redirect)("/signin");let t=new Date;t.setHours(0,0,0,0);let r=await o.A.ticket.groupBy({by:["ownerId"],where:{createdAt:{gte:t}},_count:{_all:!0}}),d=new Map(r.filter(e=>e.ownerId).map(e=>[e.ownerId,e._count._all])),l=r.find(e=>null===e.ownerId)?._count._all??0,u=(await o.A.user.findMany({orderBy:{name:"asc"},select:{id:!0,name:!0,email:!0,avatarUrl:!0}})).map(e=>({owner:e,count:d.get(e.id)??0,rank:0})).sort((e,t)=>t.count-e.count).map((e,t)=>({...e,rank:t+1}));u.some(t=>t.owner.id===e.id)||u.push({owner:{id:e.id,name:e.name??e.email,email:e.email,avatarUrl:e.avatarUrl??null},count:0,rank:u.length+1});let c=u.reduce((e,t)=>e+t.count,0)+l;return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-sm dark:border-white/5 dark:bg-white/5",children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("p",{className:"text-sm uppercase tracking-wide text-brand-500",children:"Today's League"}),(0,n.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Ticket count by teammate"}),(0,n.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Updated ",new Intl.DateTimeFormat("en",{dateStyle:"long"}).format(t)," â€” total tickets today:"," ",(0,n.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:s(c)})]})]})}),0===u.length?(0,n.jsx)("div",{className:"rounded-2xl border border-dashed border-gray-200 p-10 text-center text-sm text-gray-500 dark:border-white/10 dark:text-gray-400",children:"No tickets have been logged today. Check back after the next shift."}):(0,n.jsx)("div",{className:"space-y-4",children:u.map(t=>(0,n.jsxs)("div",{className:`flex flex-col gap-4 rounded-2xl border border-gray-200 bg-white p-4 transition dark:border-white/10 dark:bg-white/5 lg:flex-row lg:items-center lg:justify-between ${t.owner.id===e.id?"ring-2 ring-brand-400":""}`,children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gray-100 text-lg font-semibold text-gray-600 dark:bg-gray-800 dark:text-gray-200",children:t.owner.avatarUrl?(0,n.jsx)("img",{src:t.owner.avatarUrl,alt:t.owner.name??t.owner.email,className:"h-12 w-12 rounded-full object-cover"}):(0,n.jsx)("span",{children:(t.owner.name??t.owner.email).charAt(0).toUpperCase()})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:t.owner.name??t.owner.email}),(0,n.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.owner.email})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-500 dark:text-gray-400",children:[(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"text-xs uppercase tracking-wide",children:"Tickets today"}),(0,n.jsx)("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s(t.count)})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"text-xs uppercase tracking-wide",children:"Rank"}),(0,n.jsxs)("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["#",t.rank]})]})]})]},t.owner.id))}),l>0&&(0,n.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-4 text-sm text-gray-600 dark:border-white/10 dark:bg-white/5 dark:text-gray-300",children:[(0,n.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"Unassigned tickets"}),(0,n.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s(l)}),(0,n.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tickets logged today that haven't been claimed yet."})]})]})}},55511:e=>{"use strict";e.exports=require("crypto")},61701:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>f,tree:()=>l});var n=r(65239),a=r(48088),o=r(88170),i=r.n(o),d=r(30893),s={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>d[e]);r.d(t,s);let l={children:["",{children:["(admin)",{children:["today-league",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,53849)),"/Users/iwan/Downloads/New Chat/new-support/src/app/(admin)/today-league/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,10814)),"/Users/iwan/Downloads/New Chat/new-support/src/app/(admin)/layout.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/iwan/Downloads/New Chat/new-support/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"/Users/iwan/Downloads/New Chat/new-support/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/Users/iwan/Downloads/New Chat/new-support/src/app/(admin)/today-league/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(admin)/today-league/page",pathname:"/today-league",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},62765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return a}});let n=""+r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function a(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70899:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},71042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,i.isNextRouterError)(t)||(0,o.isBailoutToCSRError)(t)||(0,s.isDynamicServerError)(t)||(0,d.isDynamicPostpone)(t)||(0,a.isPostpone)(t)||(0,n.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(68388),a=r(52637),o=r(51846),i=r(31162),d=r(84971),s=r(98479);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},86897:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return c},getRedirectTypeFromError:function(){return u},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return s},redirect:function(){return d}});let n=r(52836),a=r(49026),o=r(19121).actionAsyncStorage;function i(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let o=Object.defineProperty(Error(a.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return o.digest=a.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",o}function d(e,t){var r;throw null!=t||(t=(null==o?void 0:null==(r=o.getStore())?void 0:r.isAction)?a.RedirectType.push:a.RedirectType.replace),i(e,t,n.RedirectStatusCode.TemporaryRedirect)}function s(e,t){throw void 0===t&&(t=a.RedirectType.replace),i(e,t,n.RedirectStatusCode.PermanentRedirect)}function l(e){return(0,a.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function u(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function c(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{},97576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return u},RedirectType:function(){return a.RedirectType},forbidden:function(){return i.forbidden},notFound:function(){return o.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return d.unauthorized},unstable_rethrow:function(){return s.unstable_rethrow}});let n=r(86897),a=r(49026),o=r(62765),i=r(48976),d=r(70899),s=r(163);class l extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class u extends URLSearchParams{append(){throw new l}delete(){throw new l}set(){throw new l}sort(){throw new l}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[4447,4999,7370,879,3409],()=>r(61701));module.exports=n})();