(()=>{var e={};e.id=887,e.ids=[887],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12909:(e,t,a)=>{"use strict";a.d(t,{C0:()=>d,HW:()=>p,IX:()=>o,jw:()=>l,lx:()=>u,uv:()=>c});var r=a(44999),s=a(61120),n=a(55511),i=a(31183);let o="session-token";async function l(e){let t=(0,n.randomBytes)(32).toString("hex"),a=new Date(Date.now()+6048e5);return await i.A.session.create({data:{token:t,userId:e,expiresAt:a}}),{token:t,expiresAt:a}}async function u(e){e&&await i.A.session.deleteMany({where:{token:e}})}let p=(0,s.cache)(async()=>{let e=await (0,r.UL)(),t=e.get(o)?.value;if(!t)return null;let a=await i.A.session.findUnique({where:{token:t},include:{user:!0}});if(!a)return null;if(a.expiresAt.getTime()<Date.now())return await i.A.session.delete({where:{id:a.id}}),null;let s=a.user;return{id:s.id,email:s.email,name:s.name,firstName:s.firstName??null,lastName:s.lastName??null,phone:s.phone??null,bio:s.bio??null,location:s.location??null,facebook:s.facebook??null,twitter:s.twitter??null,linkedin:s.linkedin??null,instagram:s.instagram??null,country:s.country??null,cityState:s.cityState??null,postalCode:s.postalCode??null,taxId:s.taxId??null,avatarUrl:s.avatarUrl??null}});function c(e,t,a){e.cookies.set({name:o,value:t,httpOnly:!0,secure:!0,sameSite:"lax",path:"/",expires:a})}function d(e){e.cookies.set({name:o,value:"",httpOnly:!0,secure:!0,sameSite:"lax",path:"/",expires:new Date(0)})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31183:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(96330);let s=global.prisma??new r.PrismaClient},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},62138:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patchFetch:()=>h,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>w});var r={};a.r(r),a.d(r,{POST:()=>c});var s=a(96559),n=a(48088),i=a(37719),o=a(32190),l=a(85663),u=a(31183),p=a(12909);async function c(e){let t=await e.json().catch(()=>({})),a=t.email?.toLowerCase().trim(),r=t.password?.trim(),s=t.firstName?.trim()||null,n=t.lastName?.trim()||null,i=[s,n].filter(Boolean).join(" ").trim()||null;if(!a||!r)return o.NextResponse.json({error:"Email and password are required."},{status:400});if(r.length<8)return o.NextResponse.json({error:"Password must be at least 8 characters long."},{status:400});if(await u.A.user.findUnique({where:{email:a}}))return o.NextResponse.json({error:"An account with this email already exists."},{status:409});let c=await l.Ay.hash(r,12),d=await u.A.user.create({data:{email:a,passwordHash:c,name:i,firstName:s,lastName:n}}),m=await (0,p.jw)(d.id),w=o.NextResponse.json({ok:!0,user:{id:d.id,email:d.email,name:d.name,firstName:d.firstName,lastName:d.lastName,phone:d.phone,bio:d.bio,location:d.location,facebook:d.facebook,twitter:d.twitter,linkedin:d.linkedin,instagram:d.instagram,country:d.country,cityState:d.cityState,postalCode:d.postalCode,taxId:d.taxId,avatarUrl:d.avatarUrl}});return(0,p.uv)(w,m.token,m.expiresAt),w}let d=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"/Users/iwan/Downloads/New Chat/new-support/src/app/api/auth/signup/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:m,workUnitAsyncStorage:w,serverHooks:x}=d;function h(){return(0,i.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:w})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[447,999,580,663],()=>a(62138));module.exports=r})();