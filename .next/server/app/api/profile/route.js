(()=>{var e={};e.id=73,e.ids=[73],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4993:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patchFetch:()=>h,routeModule:()=>m,serverHooks:()=>w,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>x});var r={};a.r(r),a.d(r,{PATCH:()=>d});var n=a(96559),i=a(48088),s=a(37719),o=a(32190),l=a(12909),u=a(31183);let p=["firstName","lastName","phone","bio","location","facebook","twitter","linkedin","instagram","country","cityState","postalCode","taxId","avatarUrl"],c=e=>{if("string"!=typeof e)return null;let t=e.trim();return t.length?t:null};async function d(e){let t=await (0,l.HW)();if(!t)return o.NextResponse.json({error:"Unauthorized"},{status:401});let a=await e.json().catch(()=>null);if(!a)return o.NextResponse.json({error:"Invalid payload"},{status:400});let r={};if(p.forEach(e=>{e in a&&(r[e]=c(a[e]))}),"firstName"in r||"lastName"in r){let e=[r.firstName??t.firstName,r.lastName??t.lastName].filter(Boolean).join(" ").trim();r.name=e.length?e:null}if(0===Object.keys(r).length)return o.NextResponse.json({ok:!0});let n=await u.A.user.update({where:{id:t.id},data:r});return o.NextResponse.json({ok:!0,user:{id:n.id,email:n.email,name:n.name,firstName:n.firstName,lastName:n.lastName,phone:n.phone,bio:n.bio,location:n.location,facebook:n.facebook,twitter:n.twitter,linkedin:n.linkedin,instagram:n.instagram,country:n.country,cityState:n.cityState,postalCode:n.postalCode,taxId:n.taxId,avatarUrl:n.avatarUrl}})}let m=new n.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/profile/route",pathname:"/api/profile",filename:"route",bundlePath:"app/api/profile/route"},resolvedPagePath:"/Users/iwan/Downloads/New Chat/new-support/src/app/api/profile/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:f,workUnitAsyncStorage:x,serverHooks:w}=m;function h(){return(0,s.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:x})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12909:(e,t,a)=>{"use strict";a.d(t,{C0:()=>d,HW:()=>p,IX:()=>o,jw:()=>l,lx:()=>u,uv:()=>c});var r=a(44999),n=a(61120),i=a(55511),s=a(31183);let o="session-token";async function l(e){let t=(0,i.randomBytes)(32).toString("hex"),a=new Date(Date.now()+6048e5);return await s.A.session.create({data:{token:t,userId:e,expiresAt:a}}),{token:t,expiresAt:a}}async function u(e){e&&await s.A.session.deleteMany({where:{token:e}})}let p=(0,n.cache)(async()=>{let e=await (0,r.UL)(),t=e.get(o)?.value;if(!t)return null;let a=await s.A.session.findUnique({where:{token:t},include:{user:!0}});if(!a)return null;if(a.expiresAt.getTime()<Date.now())return await s.A.session.delete({where:{id:a.id}}),null;let n=a.user;return{id:n.id,email:n.email,name:n.name,firstName:n.firstName??null,lastName:n.lastName??null,phone:n.phone??null,bio:n.bio??null,location:n.location??null,facebook:n.facebook??null,twitter:n.twitter??null,linkedin:n.linkedin??null,instagram:n.instagram??null,country:n.country??null,cityState:n.cityState??null,postalCode:n.postalCode??null,taxId:n.taxId??null,avatarUrl:n.avatarUrl??null}});function c(e,t,a){e.cookies.set({name:o,value:t,httpOnly:!0,secure:!0,sameSite:"lax",path:"/",expires:a})}function d(e){e.cookies.set({name:o,value:"",httpOnly:!0,secure:!0,sameSite:"lax",path:"/",expires:new Date(0)})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31183:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(96330);let n=global.prisma??new r.PrismaClient},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[447,999,580],()=>a(4993));module.exports=r})();