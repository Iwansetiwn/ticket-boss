(()=>{var e={};e.id=505,e.ids=[505],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12909:(e,t,r)=>{"use strict";r.d(t,{C0:()=>p,HW:()=>c,IX:()=>o,jw:()=>u,lx:()=>l,uv:()=>d});var s=r(44999),n=r(61120),a=r(55511),i=r(31183);let o="session-token";async function u(e){let t=(0,a.randomBytes)(32).toString("hex"),r=new Date(Date.now()+6048e5);return await i.A.session.create({data:{token:t,userId:e,expiresAt:r}}),{token:t,expiresAt:r}}async function l(e){e&&await i.A.session.deleteMany({where:{token:e}})}let c=(0,n.cache)(async()=>{let e=await (0,s.UL)(),t=e.get(o)?.value;if(!t)return null;let r=await i.A.session.findUnique({where:{token:t},include:{user:!0}});if(!r)return null;if(r.expiresAt.getTime()<Date.now())return await i.A.session.delete({where:{id:r.id}}),null;let n=r.user;return{id:n.id,email:n.email,name:n.name,firstName:n.firstName??null,lastName:n.lastName??null,phone:n.phone??null,bio:n.bio??null,location:n.location??null,facebook:n.facebook??null,twitter:n.twitter??null,linkedin:n.linkedin??null,instagram:n.instagram??null,country:n.country??null,cityState:n.cityState??null,postalCode:n.postalCode??null,taxId:n.taxId??null,avatarUrl:n.avatarUrl??null}});function d(e,t,r){e.cookies.set({name:o,value:t,httpOnly:!0,secure:!0,sameSite:"lax",path:"/",expires:r})}function p(e){e.cookies.set({name:o,value:"",httpOnly:!0,secure:!0,sameSite:"lax",path:"/",expires:new Date(0)})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31183:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(96330);let n=global.prisma??new s.PrismaClient},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},84528:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>w});var s={};r.r(s),r.d(s,{DELETE:()=>c});var n=r(96559),a=r(48088),i=r(37719),o=r(32190),u=r(31183),l=r(12909);async function c(e,t){let r=await (0,l.HW)();if(!r)return o.NextResponse.json({error:"Unauthorized"},{status:401});let{id:s}=await t.params;if(!s)return o.NextResponse.json({error:"Invalid id"},{status:400});try{let e=await u.A.ticket.findUnique({where:{id:s},select:{ownerId:!0}});if(!(e&&(!e.ownerId||e.ownerId===r.id)))return o.NextResponse.json({error:"Not found"},{status:404});return await u.A.ticket.delete({where:{id:s}}),o.NextResponse.json({success:!0},{status:200})}catch(e){return console.error("delete ticket error:",e),o.NextResponse.json({error:"Failed to delete"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/tickets/[id]/route",pathname:"/api/tickets/[id]",filename:"route",bundlePath:"app/api/tickets/[id]/route"},resolvedPagePath:"/Users/iwan/Downloads/New Chat/new-support/src/app/api/tickets/[id]/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:p,workUnitAsyncStorage:w,serverHooks:x}=d;function m(){return(0,i.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:w})}},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,999,580],()=>r(84528));module.exports=s})();